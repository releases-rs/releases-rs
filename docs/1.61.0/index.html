<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='1.61.0 # Released on: 19 May, 2022 Branched from master on: 1 April, 2022 Language # const fn signatures can now include generic trait bounds const fn signatures can now use impl Trait in argument and return position Function pointers can now be created, cast, and passed around in a const fn Recursive calls can now set the value of a function&rsquo;s opaque impl Trait return type Compiler # Linking modifier syntax in #[link] attributes and on the command line, as well as the whole-archive modifier specifically, are now supported The char type is now described as UTF-32 in debuginfo The #[target_feature] attribute can now be used with aarch64 features X86 #[target_feature = "adx"] is now stable Libraries # ManuallyDrop<T> is now documented to have the same layout as T #[ignore = "…"] messages are printed when running tests Consistently show absent stdio handles on Windows as NULL handles Make std::io::stdio::lock() return &#39;static handles.'><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://releases.rs/docs/1.61.0/"><meta property="og:site_name" content="Rust Changelogs"><meta property="og:title" content="Rust Changelogs"><meta property="og:description" content='1.61.0 # Released on: 19 May, 2022 Branched from master on: 1 April, 2022 Language # const fn signatures can now include generic trait bounds const fn signatures can now use impl Trait in argument and return position Function pointers can now be created, cast, and passed around in a const fn Recursive calls can now set the value of a function’s opaque impl Trait return type Compiler # Linking modifier syntax in #[link] attributes and on the command line, as well as the whole-archive modifier specifically, are now supported The char type is now described as UTF-32 in debuginfo The #[target_feature] attribute can now be used with aarch64 features X86 #[target_feature = "adx"] is now stable Libraries # ManuallyDrop<T> is now documented to have the same layout as T #[ignore = "…"] messages are printed when running tests Consistently show absent stdio handles on Windows as NULL handles Make std::io::stdio::lock() return &#39;static handles.'><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>1.61.0 | Rust Changelogs</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f8de3645fe00591b41524aee174e19edd98a22255a2930a0cdc82a94835ba387.css integrity="sha256-+N42Rf4AWRtBUkruF04Z7dmKIiVaKTCgzcgqlINbo4c=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.c388c11c592dc288a164aad215c8440891472bedf333206f6945e9f9ce00660e.js integrity="sha256-w4jBHFktwoihZKrSFchECJFHK+3zMyBvaUXp+c4AZg4=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WXS0HSEV58"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WXS0HSEV58")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=https://www.rust-lang.org/static/images/rust-logo-blk.svg alt=Logo><span>Rust Changelogs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/1.80.0/>1.80.0</a></li><li><a href=/docs/1.79.0/>1.79.0</a></li><li><a href=/docs/1.78.0/>1.78.0</a></li><li><a href=/docs/1.77.2/>1.77.2</a></li><li><a href=/docs/1.77.1/>1.77.1</a></li><li><a href=/docs/1.77.0/>1.77.0</a></li><li><a href=/docs/1.76.0/>1.76.0</a></li><li><a href=/docs/1.75.0/>1.75.0</a></li><li><a href=/docs/1.74.1/>1.74.1</a></li><li><a href=/docs/1.74.0/>1.74.0</a></li><li><a href=/docs/1.73.0/>1.73.0</a></li><li><a href=/docs/1.72.1/>1.72.1</a></li><li><a href=/docs/1.72.0/>1.72.0</a></li><li><a href=/docs/1.71.1/>1.71.1</a></li><li><a href=/docs/1.71.0/>1.71.0</a></li><li><a href=/docs/1.70.0/>1.70.0</a></li><li><a href=/docs/1.69.0/>1.69.0</a></li><li><a href=/docs/1.68.2/>1.68.2</a></li><li><a href=/docs/1.68.1/>1.68.1</a></li><li><a href=/docs/1.68.0/>1.68.0</a></li><li><a href=/docs/1.67.1/>1.67.1</a></li><li><a href=/docs/1.67.0/>1.67.0</a></li><li><a href=/docs/1.66.1/>1.66.1</a></li><li><a href=/docs/1.66.0/>1.66.0</a></li><li><a href=/docs/1.65.0/>1.65.0</a></li><li><a href=/docs/1.64.0/>1.64.0</a></li><li><a href=/docs/1.63.0/>1.63.0</a></li><li><a href=/docs/1.62.1/>1.62.1</a></li><li><a href=/docs/1.62.0/>1.62.0</a></li><li><a href=/docs/1.61.0/ class=active>1.61.0</a></li><li><a href=/docs/1.60.0/>1.60.0</a></li><li><a href=/docs/1.59.0/>1.59.0</a></li><li><a href=/docs/1.58.1/>1.58.1</a></li><li><a href=/docs/1.58.0/>1.58.0</a></li><li><a href=/docs/1.57.0/>1.57.0</a></li><li><a href=/docs/1.56.1/>1.56.1</a></li><li><a href=/docs/1.56.0/>1.56.0</a></li><li><a href=/docs/1.55.0/>1.55.0</a></li><li><a href=/docs/1.54.0/>1.54.0</a></li><li><a href=/docs/1.53.0/>1.53.0</a></li><li><a href=/docs/1.52.1/>1.52.1</a></li><li><a href=/docs/1.52.0/>1.52.0</a></li><li><a href=/docs/1.51.0/>1.51.0</a></li><li><a href=/docs/1.50.0/>1.50.0</a></li><li><a href=/docs/1.49.0/>1.49.0</a></li><li><a href=/docs/1.48.0/>1.48.0</a></li><li><a href=/docs/1.47.0/>1.47.0</a></li><li><a href=/docs/1.46.0/>1.46.0</a></li><li><a href=/docs/1.45.2/>1.45.2</a></li><li><a href=/docs/1.45.1/>1.45.1</a></li><li><a href=/docs/1.45.0/>1.45.0</a></li><li><a href=/docs/1.44.1/>1.44.1</a></li><li><a href=/docs/1.44.0/>1.44.0</a></li><li><a href=/docs/1.43.1/>1.43.1</a></li><li><a href=/docs/1.43.0/>1.43.0</a></li><li><a href=/docs/1.42.0/>1.42.0</a></li><li><a href=/docs/1.41.1/>1.41.1</a></li><li><a href=/docs/1.41.0/>1.41.0</a></li><li><a href=/docs/1.40.0/>1.40.0</a></li><li><a href=/docs/1.39.0/>1.39.0</a></li><li><a href=/docs/1.38.0/>1.38.0</a></li><li><a href=/docs/1.37.0/>1.37.0</a></li><li><a href=/docs/1.36.0/>1.36.0</a></li><li><a href=/docs/1.35.0/>1.35.0</a></li><li><a href=/docs/1.34.2/>1.34.2</a></li><li><a href=/docs/1.34.1/>1.34.1</a></li><li><a href=/docs/1.34.0/>1.34.0</a></li><li><a href=/docs/1.33.0/>1.33.0</a></li><li><a href=/docs/1.32.0/>1.32.0</a></li><li><a href=/docs/1.31.1/>1.31.1</a></li><li><a href=/docs/1.31.0/>1.31.0</a></li><li><a href=/docs/1.30.1/>1.30.1</a></li><li><a href=/docs/1.30.0/>1.30.0</a></li><li><a href=/docs/1.29.2/>1.29.2</a></li><li><a href=/docs/1.29.1/>1.29.1</a></li><li><a href=/docs/1.29.0/>1.29.0</a></li><li><a href=/docs/1.28.0/>1.28.0</a></li><li><a href=/docs/1.27.2/>1.27.2</a></li><li><a href=/docs/1.27.1/>1.27.1</a></li><li><a href=/docs/1.27.0/>1.27.0</a></li><li><a href=/docs/1.26.2/>1.26.2</a></li><li><a href=/docs/1.26.1/>1.26.1</a></li><li><a href=/docs/1.26.0/>1.26.0</a></li><li><a href=/docs/1.25.0/>1.25.0</a></li><li><a href=/docs/1.24.1/>1.24.1</a></li><li><a href=/docs/1.24.0/>1.24.0</a></li><li><a href=/docs/1.23.0/>1.23.0</a></li><li><a href=/docs/1.22.1/>1.22.1</a></li><li><a href=/docs/1.22.0/>1.22.0</a></li><li><a href=/docs/1.21.0/>1.21.0</a></li><li><a href=/docs/1.20.0/>1.20.0</a></li><li><a href=/docs/1.19.0/>1.19.0</a></li><li><a href=/docs/1.18.0/>1.18.0</a></li><li><a href=/docs/1.17.0/>1.17.0</a></li><li><a href=/docs/1.16.0/>1.16.0</a></li><li><a href=/docs/1.15.1/>1.15.1</a></li><li><a href=/docs/1.15.0/>1.15.0</a></li><li><a href=/docs/1.14.0/>1.14.0</a></li><li><a href=/docs/1.13.0/>1.13.0</a></li><li><a href=/docs/1.12.1/>1.12.1</a></li><li><a href=/docs/1.12.0/>1.12.0</a></li><li><a href=/docs/1.11.0/>1.11.0</a></li><li><a href=/docs/1.10.0/>1.10.0</a></li><li><a href=/docs/1.9.0/>1.9.0</a></li><li><a href=/docs/1.8.0/>1.8.0</a></li><li><a href=/docs/1.7.0/>1.7.0</a></li><li><a href=/docs/1.6.0/>1.6.0</a></li><li><a href=/docs/1.5.0/>1.5.0</a></li><li><a href=/docs/1.4.0/>1.4.0</a></li><li><a href=/docs/1.3.0/>1.3.0</a></li><li><a href=/docs/1.2.0/>1.2.0</a></li><li><a href=/docs/1.1.0/>1.1.0</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>1.61.0</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#language>Language</a></li><li><a href=#compiler>Compiler</a></li><li><a href=#libraries>Libraries</a></li><li><a href=#stabilized-apis>Stabilized APIs</a></li><li><a href=#cargo>Cargo</a></li><li><a href=#compatibility-notes>Compatibility Notes</a></li><li><a href=#internal-changes>Internal Changes</a></li></ul></nav></aside></header><article class=markdown><h1 id=1610>1.61.0
<a class=anchor href=#1610>#</a></h1><blockquote class="book-hint info"><ul><li>Released on: <em>19 May, 2022</em></li><li>Branched from master on: <em>1 April, 2022</em></li></ul></blockquote><h2 id=language>Language
<a class=anchor href=#language>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/93827/><code>const fn</code> signatures can now include generic trait bounds</a></li><li><a href=https://github.com/rust-lang/rust/pull/93827/><code>const fn</code> signatures can now use <code>impl Trait</code> in argument and return position</a></li><li><a href=https://github.com/rust-lang/rust/pull/93827/>Function pointers can now be created, cast, and passed around in a <code>const fn</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/94081/>Recursive calls can now set the value of a function&rsquo;s opaque <code>impl Trait</code> return type</a></li></ul><h2 id=compiler>Compiler
<a class=anchor href=#compiler>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/93901/>Linking modifier syntax in <code>#[link]</code> attributes and on the command line, as well as the <code>whole-archive</code> modifier specifically, are now supported</a></li><li><a href=https://github.com/rust-lang/rust/pull/89887/>The <code>char</code> type is now described as UTF-32 in debuginfo</a></li><li>The <a href=https://doc.rust-lang.org/reference/attributes/codegen.html#the-target_feature-attribute><code>#[target_feature]</code></a> attribute <a href=https://github.com/rust-lang/rust/pull/90621/>can now be used with aarch64 features</a></li><li>X86 <a href=https://github.com/rust-lang/rust/pull/93745/><code>#[target_feature = "adx"]</code> is now stable</a></li></ul><h2 id=libraries>Libraries
<a class=anchor href=#libraries>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/88375/><code>ManuallyDrop&lt;T></code> is now documented to have the same layout as <code>T</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/92714/><code>#[ignore = "…"]</code> messages are printed when running tests</a></li><li><a href=https://github.com/rust-lang/rust/pull/93263/>Consistently show absent stdio handles on Windows as NULL handles</a></li><li><a href=https://github.com/rust-lang/rust/pull/93965/>Make <code>std::io::stdio::lock()</code> return <code>'static</code> handles.</a> Previously, the creation of locked handles to stdin/stdout/stderr would borrow the handles being locked, which prevented writing <code>let out = std::io::stdout().lock();</code> because <code>out</code> would outlive the return value of <code>stdout()</code>. Such code now works, eliminating a common pitfall that affected many Rust users.</li><li><a href=https://github.com/rust-lang/rust/pull/95016/><code>Vec::from_raw_parts</code> is now less restrictive about its inputs</a></li><li><a href=https://github.com/rust-lang/rust/pull/92697/><code>std::thread::available_parallelism</code> now takes cgroup quotas into account.</a> Since <code>available_parallelism</code> is often used to create a thread pool for parallel computation, which may be CPU-bound for performance, <code>available_parallelism</code> will return a value consistent with the ability to use that many threads continuously, if possible. For instance, in a container with 8 virtual CPUs but quotas only allowing for 50% usage, <code>available_parallelism</code> will return 4.</li></ul><h2 id=stabilized-apis>Stabilized APIs
<a class=anchor href=#stabilized-apis>#</a></h2><ul><li><a href=https://doc.rust-lang.org/stable/std/pin/struct.Pin.html#method.static_mut><code>Pin::static_mut</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/pin/struct.Pin.html#method.static_ref><code>Pin::static_ref</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/vec/struct.Vec.html#method.retain_mut><code>Vec::retain_mut</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/collections/struct.VecDeque.html#method.retain_mut><code>VecDeque::retain_mut</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/io/struct.Cursor.html#impl-Write-4><code>Write</code> for <code>Cursor&lt;[u8; N]></code></a></li><li><a href=https://doc.rust-lang.org/stable/std/os/unix/net/struct.SocketAddr.html#method.from_pathname><code>std::os::unix::net::SocketAddr::from_pathname</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/process/struct.ExitCode.html><code>std::process::ExitCode</code></a> and <a href=https://doc.rust-lang.org/stable/std/process/trait.Termination.html><code>std::process::Termination</code></a>. The stabilization of these two APIs now makes it possible for programs to return errors from <code>main</code> with custom exit codes.</li><li><a href=https://doc.rust-lang.org/stable/std/thread/struct.JoinHandle.html#method.is_finished><code>std::thread::JoinHandle::is_finished</code></a></li></ul><p>These APIs are now usable in const contexts:</p><ul><li><a href=https://doc.rust-lang.org/stable/std/primitive.pointer.html#method.offset><code>&lt;*const T>::offset</code> and <code>&lt;*mut T>::offset</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.pointer.html#method.wrapping_offset><code>&lt;*const T>::wrapping_offset</code> and <code>&lt;*mut T>::wrapping_offset</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.pointer.html#method.add><code>&lt;*const T>::add</code> and <code>&lt;*mut T>::add</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.pointer.html#method.sub><code>&lt;*const T>::sub</code> and <code>&lt;*mut T>::sub</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.pointer.html#method.wrapping_add><code>&lt;*const T>::wrapping_add</code> and <code>&lt;*mut T>::wrapping_add</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.pointer.html#method.wrapping_sub><code>&lt;*const T>::wrapping_sub</code> and <code>&lt;*mut T>::wrapping_sub</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.slice.html#method.as_mut_ptr><code>&lt;[T]>::as_mut_ptr</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.slice.html#method.as_ptr_range><code>&lt;[T]>::as_ptr_range</code></a></li><li><a href=https://doc.rust-lang.org/stable/std/primitive.slice.html#method.as_mut_ptr_range><code>&lt;[T]>::as_mut_ptr_range</code></a></li></ul><h2 id=cargo>Cargo
<a class=anchor href=#cargo>#</a></h2><p>No feature changes, but see compatibility notes.</p><h2 id=compatibility-notes>Compatibility Notes
<a class=anchor href=#compatibility-notes>#</a></h2><ul><li>Previously native static libraries were linked as <code>whole-archive</code> in some cases, but now rustc tries not to use <code>whole-archive</code> unless explicitly requested. This <a href=https://github.com/rust-lang/rust/pull/93901/>change</a> may result in linking errors in some cases. To fix such errors, native libraries linked from the command line, build scripts, or <a href=https://doc.rust-lang.org/stable/reference/items/external-blocks.html#the-link-attribute><code>#[link]</code> attributes</a> need to<ul><li>(more common) either be reordered to respect dependencies between them (if <code>a</code> depends on <code>b</code> then <code>a</code> should go first and <code>b</code> second)</li><li>(less common) or be updated to use the <a href=https://doc.rust-lang.org/stable/rustc/command-line-arguments.html#linking-modifiers-whole-archive><code>+whole-archive</code></a> modifier.</li></ul></li><li><a href=https://github.com/rust-lang/rust/pull/92911/>Catching a second unwind from FFI code while cleaning up from a Rust panic now causes the process to abort</a></li><li><a href=https://github.com/rust-lang/rust/pull/92472/>Proc macros no longer see <code>ident</code> matchers wrapped in groups</a></li><li><a href=https://github.com/rust-lang/rust/pull/95251/>The number of <code>#</code> in <code>r#</code> raw string literals is now required to be less than 256</a></li><li><a href=https://github.com/rust-lang/rust/pull/92285/>When checking that a dyn type satisfies a trait bound, supertrait bounds are now enforced</a></li><li><a href=https://github.com/rust-lang/cargo/pull/10448/><code>cargo vendor</code> now only accepts one value for each <code>--sync</code> flag</a></li><li><a href=https://github.com/rust-lang/rust/pull/94295/><code>cfg</code> predicates in <code>all()</code> and <code>any()</code> are always evaluated to detect errors, instead of short-circuiting.</a> The compatibility considerations here arise in nightly-only code that used the short-circuiting behavior of <code>all</code> to write something like <code>cfg(all(feature = "nightly", syntax-requiring-nightly))</code>, which will now fail to compile. Instead, use either <code>cfg_attr(feature = "nightly", ...)</code> or nested uses of <code>cfg</code>.</li><li><a href=https://github.com/rust-lang/rust/pull/94832/>bootstrap: static-libstdcpp is now enabled by default, and can now be disabled when llvm-tools is enabled</a></li></ul><h2 id=internal-changes>Internal Changes
<a class=anchor href=#internal-changes>#</a></h2><p>These changes provide no direct user facing benefits, but represent significant
improvements to the internals and overall performance of rustc
and related tools.</p><ul><li><a href=https://github.com/rust-lang/rust/pull/94261/>debuginfo: Refactor debuginfo generation for types</a></li><li><a href=https://github.com/rust-lang/rust/pull/93913/>Remove the everybody loops pass</a></li></ul></article><footer class=book-footer><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#language>Language</a></li><li><a href=#compiler>Compiler</a></li><li><a href=#libraries>Libraries</a></li><li><a href=#stabilized-apis>Stabilized APIs</a></li><li><a href=#cargo>Cargo</a></li><li><a href=#compatibility-notes>Compatibility Notes</a></li><li><a href=#internal-changes>Internal Changes</a></li></ul></nav></div></aside></main></body></html>