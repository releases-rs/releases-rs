<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='
  1.15.0
  #


  
Released on: 2 February, 2017
Branched from master on: 16 December, 2016





  Language
  #


Basic procedural macros allowing custom #[derive], aka &ldquo;macros 1.1&rdquo;, are
stable. This allows popular code-generating crates like Serde and Diesel to
work ergonomically. RFC 1681.
Tuple structs may be empty. Unary and empty tuple structs may be instantiated
with curly braces. Part of RFC 1506.
A number of minor changes to name resolution have been activated.
They add up to more consistent semantics, allowing for future evolution of
Rust macros. Specified in RFC 1560, see its section on &ldquo;changes&rdquo; for
details of what is different. The breaking changes here have been transitioned
through the legacy_imports lint since 1.14, with no known regressions.
In macro_rules, path fragments can now be parsed as type parameter
bounds
?Sized can be used in where clauses
There is now a limit on the size of monomorphized types and it can be
modified with the #![type_size_limit] crate attribute, similarly to
the #![recursion_limit] attribute


  Compiler
  #


On Windows, the compiler will apply dllimport attributes when linking to
extern functions. Additional attributes and flags can control which
library kind is linked and its name. RFC 1717.
Rust-ABI symbols are no longer exported from cdylibs
The --test flag works with procedural macro crates
Fix extern "aapcs" fn ABI
The -C no-stack-check flag is deprecated. It does nothing.
The format! expander recognizes incorrect printf and shell-style
formatting directives and suggests the correct format.
Only report one error for all unused imports in an import list


  Compiler Performance
  #


Avoid unnecessary mk_ty calls in Ty::super_fold_with
Avoid more unnecessary mk_ty calls in Ty::super_fold_with
Don&rsquo;t clone in UnificationTable::probe
Remove scope_auxiliary to cut RSS by 10%
Use small vectors in type walker
Macro expansion performance was improved
Change HirVec<P<T>> to HirVec<T> in hir::Expr
Replace FNV with a faster hash function


  Stabilized APIs
  #


std::iter::Iterator::min_by
std::iter::Iterator::max_by
std::os::*::fs::FileExt
std::sync::atomic::Atomic*::get_mut
std::sync::atomic::Atomic*::into_inner
std::vec::IntoIter::as_slice
std::vec::IntoIter::as_mut_slice
std::sync::mpsc::Receiver::try_iter
std::os::unix::process::CommandExt::before_exec
std::rc::Rc::strong_count
std::rc::Rc::weak_count
std::sync::Arc::strong_count
std::sync::Arc::weak_count
std::char::encode_utf8
std::char::encode_utf16
std::cell::Ref::clone
std::io::Take::into_inner


  Libraries
  #


The standard sorting algorithm has been rewritten for dramatic performance
improvements. It is a hybrid merge sort, drawing influences from
Timsort. Previously it was a naive merge sort.
Iterator::nth no longer has a Sized bound
Extend<&amp;T> is specialized for Vec where T: Copy to improve
performance.
chars().count() is much faster and so are chars().last()
and char_indices().last()
Fix ARM Objective-C ABI in std::env::args
Chinese characters display correctly in fmt::Debug
Derive Default for Duration
Support creation of anonymous pipes on WinXP/2k
mpsc::RecvTimeoutError implements Error
Don&rsquo;t pass overlapped handles to processes


  Cargo
  #


In this release, Cargo build scripts no longer have access to the OUT_DIR
environment variable at build time via env!("OUT_DIR"). They
should instead check the variable at runtime with std::env. That the value
was set at build time was a bug, and incorrect when cross-compiling. This
change is known to cause breakage.
Add --all flag to cargo test
Compile statically against the MSVC CRT
Mix feature flags into fingerprint/metadata shorthash
Link OpenSSL statically on OSX
Apply new fingerprinting to build dir outputs
Test for bad path overrides with summaries
Require cargo install --vers to take a semver version
Fix retrying crate downloads for network errors
Implement string lookup for build.rustflags config key
Emit more info on &ndash;message-format=json
Assume build.rs in the same directory as Cargo.toml is a build script
Don&rsquo;t ignore errors in workspace manifest
Fix --message-format JSON when rustc emits non-JSON warnings


  Tooling
  #


Test runners (binaries built with --test) now support a --list argument
that lists the tests it contains
Test runners now support a --exact argument that makes the test filter
match exactly, instead of matching only a substring of the test name
rustdoc supports a --playground-url flag
rustdoc provides more details about #[should_panic] errors


  Misc
  #


The Rust build system is now written in Rust. The Makefiles may
continue to be used in this release by passing --disable-rustbuild to the
configure script, but they will be deleted soon. Note that the new build
system uses a different on-disk layout that will likely affect any scripts
building Rust.
Rust supports i686-unknown-openbsd. Tier 3 support. No testing or
releases.
Rust supports the MSP430. Tier 3 support. No testing or releases.
Rust supports the ARMv5TE architecture. Tier 3 support. No testing or
releases.


  Compatibility Notes
  #


A number of minor changes to name resolution have been activated.
They add up to more consistent semantics, allowing for future evolution of
Rust macros. Specified in RFC 1560, see its section on &ldquo;changes&rdquo; for
details of what is different. The breaking changes here have been transitioned
through the legacy_imports lint since 1.14, with no known regressions.
In this release, Cargo build scripts no longer have access to the OUT_DIR
environment variable at build time via env!("OUT_DIR"). They
should instead check the variable at runtime with std::env. That the value
was set at build time was a bug, and incorrect when cross-compiling. This
change is known to cause breakage.
Higher-ranked lifetimes are no longer allowed to appear only in associated
types. The hr_lifetime_in_assoc_type lint has been a warning since
1.10 and is now an error by default. It will become a hard error in the near
future.
The semantics relating modules to file system directories are changing in
minor ways. This is captured in the new legacy_directory_ownership
lint, which is a warning in this release, and will become a hard error in the
future.
Rust-ABI symbols are no longer exported from cdylibs
Once Peekable peeks a None it will return that None without re-querying
the underlying iterator
'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://releases.rs/docs/1.15.0/"><meta property="og:site_name" content="Rust Changelogs"><meta property="og:title" content="Rust Changelogs"><meta property="og:description" content='1.15.0 # Released on: 2 February, 2017 Branched from master on: 16 December, 2016 Language # Basic procedural macros allowing custom #[derive], aka “macros 1.1”, are stable. This allows popular code-generating crates like Serde and Diesel to work ergonomically. RFC 1681. Tuple structs may be empty. Unary and empty tuple structs may be instantiated with curly braces. Part of RFC 1506. A number of minor changes to name resolution have been activated. They add up to more consistent semantics, allowing for future evolution of Rust macros. Specified in RFC 1560, see its section on “changes” for details of what is different. The breaking changes here have been transitioned through the legacy_imports lint since 1.14, with no known regressions. In macro_rules, path fragments can now be parsed as type parameter bounds ?Sized can be used in where clauses There is now a limit on the size of monomorphized types and it can be modified with the #![type_size_limit] crate attribute, similarly to the #![recursion_limit] attribute Compiler # On Windows, the compiler will apply dllimport attributes when linking to extern functions. Additional attributes and flags can control which library kind is linked and its name. RFC 1717. Rust-ABI symbols are no longer exported from cdylibs The --test flag works with procedural macro crates Fix extern "aapcs" fn ABI The -C no-stack-check flag is deprecated. It does nothing. The format! expander recognizes incorrect printf and shell-style formatting directives and suggests the correct format. Only report one error for all unused imports in an import list Compiler Performance # Avoid unnecessary mk_ty calls in Ty::super_fold_with Avoid more unnecessary mk_ty calls in Ty::super_fold_with Don’t clone in UnificationTable::probe Remove scope_auxiliary to cut RSS by 10% Use small vectors in type walker Macro expansion performance was improved Change HirVec<P<T>> to HirVec<T> in hir::Expr Replace FNV with a faster hash function Stabilized APIs # std::iter::Iterator::min_by std::iter::Iterator::max_by std::os::*::fs::FileExt std::sync::atomic::Atomic*::get_mut std::sync::atomic::Atomic*::into_inner std::vec::IntoIter::as_slice std::vec::IntoIter::as_mut_slice std::sync::mpsc::Receiver::try_iter std::os::unix::process::CommandExt::before_exec std::rc::Rc::strong_count std::rc::Rc::weak_count std::sync::Arc::strong_count std::sync::Arc::weak_count std::char::encode_utf8 std::char::encode_utf16 std::cell::Ref::clone std::io::Take::into_inner Libraries # The standard sorting algorithm has been rewritten for dramatic performance improvements. It is a hybrid merge sort, drawing influences from Timsort. Previously it was a naive merge sort. Iterator::nth no longer has a Sized bound Extend<&amp;T> is specialized for Vec where T: Copy to improve performance. chars().count() is much faster and so are chars().last() and char_indices().last() Fix ARM Objective-C ABI in std::env::args Chinese characters display correctly in fmt::Debug Derive Default for Duration Support creation of anonymous pipes on WinXP/2k mpsc::RecvTimeoutError implements Error Don’t pass overlapped handles to processes Cargo # In this release, Cargo build scripts no longer have access to the OUT_DIR environment variable at build time via env!("OUT_DIR"). They should instead check the variable at runtime with std::env. That the value was set at build time was a bug, and incorrect when cross-compiling. This change is known to cause breakage. Add --all flag to cargo test Compile statically against the MSVC CRT Mix feature flags into fingerprint/metadata shorthash Link OpenSSL statically on OSX Apply new fingerprinting to build dir outputs Test for bad path overrides with summaries Require cargo install --vers to take a semver version Fix retrying crate downloads for network errors Implement string lookup for build.rustflags config key Emit more info on –message-format=json Assume build.rs in the same directory as Cargo.toml is a build script Don’t ignore errors in workspace manifest Fix --message-format JSON when rustc emits non-JSON warnings Tooling # Test runners (binaries built with --test) now support a --list argument that lists the tests it contains Test runners now support a --exact argument that makes the test filter match exactly, instead of matching only a substring of the test name rustdoc supports a --playground-url flag rustdoc provides more details about #[should_panic] errors Misc # The Rust build system is now written in Rust. The Makefiles may continue to be used in this release by passing --disable-rustbuild to the configure script, but they will be deleted soon. Note that the new build system uses a different on-disk layout that will likely affect any scripts building Rust. Rust supports i686-unknown-openbsd. Tier 3 support. No testing or releases. Rust supports the MSP430. Tier 3 support. No testing or releases. Rust supports the ARMv5TE architecture. Tier 3 support. No testing or releases. Compatibility Notes # A number of minor changes to name resolution have been activated. They add up to more consistent semantics, allowing for future evolution of Rust macros. Specified in RFC 1560, see its section on “changes” for details of what is different. The breaking changes here have been transitioned through the legacy_imports lint since 1.14, with no known regressions. In this release, Cargo build scripts no longer have access to the OUT_DIR environment variable at build time via env!("OUT_DIR"). They should instead check the variable at runtime with std::env. That the value was set at build time was a bug, and incorrect when cross-compiling. This change is known to cause breakage. Higher-ranked lifetimes are no longer allowed to appear only in associated types. The hr_lifetime_in_assoc_type lint has been a warning since 1.10 and is now an error by default. It will become a hard error in the near future. The semantics relating modules to file system directories are changing in minor ways. This is captured in the new legacy_directory_ownership lint, which is a warning in this release, and will become a hard error in the future. Rust-ABI symbols are no longer exported from cdylibs Once Peekable peeks a None it will return that None without re-querying the underlying iterator'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>1.15.0 | Rust Changelogs</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://releases.rs/docs/1.15.0/><link rel=stylesheet href=/book.min.4964903a822a7acb10dac6d1ab524833c97fb5f99b141976bcb8a47d539be9c0.css integrity="sha256-SWSQOoIqessQ2sbRq1JIM8l/tfmbFBl2vLikfVOb6cA=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.617602735cd5eac853191a290e44efff8af2df2b9b446f01f588cc7dd899e8b0.js integrity="sha256-YXYCc1zV6shTGRopDkTv/4ry3yubRG8B9YjMfdiZ6LA=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WXS0HSEV58"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WXS0HSEV58")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=https://www.rust-lang.org/static/images/rust-logo-blk.svg alt=Logo><span>Rust Changelogs</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/docs/1.86.0/>1.86.0</a></li><li><a href=/docs/1.85.0/>1.85.0</a></li><li><a href=/docs/1.84.0/>1.84.0</a></li><li><a href=/docs/1.83.0/>1.83.0</a></li><li><a href=/docs/1.82.0/>1.82.0</a></li><li><a href=/docs/1.81.0/>1.81.0</a></li><li><a href=/docs/1.80.1/>1.80.1</a></li><li><a href=/docs/1.80.0/>1.80.0</a></li><li><a href=/docs/1.79.0/>1.79.0</a></li><li><a href=/docs/1.78.0/>1.78.0</a></li><li><a href=/docs/1.77.2/>1.77.2</a></li><li><a href=/docs/1.77.1/>1.77.1</a></li><li><a href=/docs/1.77.0/>1.77.0</a></li><li><a href=/docs/1.76.0/>1.76.0</a></li><li><a href=/docs/1.75.0/>1.75.0</a></li><li><a href=/docs/1.74.1/>1.74.1</a></li><li><a href=/docs/1.74.0/>1.74.0</a></li><li><a href=/docs/1.73.0/>1.73.0</a></li><li><a href=/docs/1.72.1/>1.72.1</a></li><li><a href=/docs/1.72.0/>1.72.0</a></li><li><a href=/docs/1.71.1/>1.71.1</a></li><li><a href=/docs/1.71.0/>1.71.0</a></li><li><a href=/docs/1.70.0/>1.70.0</a></li><li><a href=/docs/1.69.0/>1.69.0</a></li><li><a href=/docs/1.68.2/>1.68.2</a></li><li><a href=/docs/1.68.1/>1.68.1</a></li><li><a href=/docs/1.68.0/>1.68.0</a></li><li><a href=/docs/1.67.1/>1.67.1</a></li><li><a href=/docs/1.67.0/>1.67.0</a></li><li><a href=/docs/1.66.1/>1.66.1</a></li><li><a href=/docs/1.66.0/>1.66.0</a></li><li><a href=/docs/1.65.0/>1.65.0</a></li><li><a href=/docs/1.64.0/>1.64.0</a></li><li><a href=/docs/1.63.0/>1.63.0</a></li><li><a href=/docs/1.62.1/>1.62.1</a></li><li><a href=/docs/1.62.0/>1.62.0</a></li><li><a href=/docs/1.61.0/>1.61.0</a></li><li><a href=/docs/1.60.0/>1.60.0</a></li><li><a href=/docs/1.59.0/>1.59.0</a></li><li><a href=/docs/1.58.1/>1.58.1</a></li><li><a href=/docs/1.58.0/>1.58.0</a></li><li><a href=/docs/1.57.0/>1.57.0</a></li><li><a href=/docs/1.56.1/>1.56.1</a></li><li><a href=/docs/1.56.0/>1.56.0</a></li><li><a href=/docs/1.55.0/>1.55.0</a></li><li><a href=/docs/1.54.0/>1.54.0</a></li><li><a href=/docs/1.53.0/>1.53.0</a></li><li><a href=/docs/1.52.1/>1.52.1</a></li><li><a href=/docs/1.52.0/>1.52.0</a></li><li><a href=/docs/1.51.0/>1.51.0</a></li><li><a href=/docs/1.50.0/>1.50.0</a></li><li><a href=/docs/1.49.0/>1.49.0</a></li><li><a href=/docs/1.48.0/>1.48.0</a></li><li><a href=/docs/1.47.0/>1.47.0</a></li><li><a href=/docs/1.46.0/>1.46.0</a></li><li><a href=/docs/1.45.2/>1.45.2</a></li><li><a href=/docs/1.45.1/>1.45.1</a></li><li><a href=/docs/1.45.0/>1.45.0</a></li><li><a href=/docs/1.44.1/>1.44.1</a></li><li><a href=/docs/1.44.0/>1.44.0</a></li><li><a href=/docs/1.43.1/>1.43.1</a></li><li><a href=/docs/1.43.0/>1.43.0</a></li><li><a href=/docs/1.42.0/>1.42.0</a></li><li><a href=/docs/1.41.1/>1.41.1</a></li><li><a href=/docs/1.41.0/>1.41.0</a></li><li><a href=/docs/1.40.0/>1.40.0</a></li><li><a href=/docs/1.39.0/>1.39.0</a></li><li><a href=/docs/1.38.0/>1.38.0</a></li><li><a href=/docs/1.37.0/>1.37.0</a></li><li><a href=/docs/1.36.0/>1.36.0</a></li><li><a href=/docs/1.35.0/>1.35.0</a></li><li><a href=/docs/1.34.2/>1.34.2</a></li><li><a href=/docs/1.34.1/>1.34.1</a></li><li><a href=/docs/1.34.0/>1.34.0</a></li><li><a href=/docs/1.33.0/>1.33.0</a></li><li><a href=/docs/1.32.0/>1.32.0</a></li><li><a href=/docs/1.31.1/>1.31.1</a></li><li><a href=/docs/1.31.0/>1.31.0</a></li><li><a href=/docs/1.30.1/>1.30.1</a></li><li><a href=/docs/1.30.0/>1.30.0</a></li><li><a href=/docs/1.29.2/>1.29.2</a></li><li><a href=/docs/1.29.1/>1.29.1</a></li><li><a href=/docs/1.29.0/>1.29.0</a></li><li><a href=/docs/1.28.0/>1.28.0</a></li><li><a href=/docs/1.27.2/>1.27.2</a></li><li><a href=/docs/1.27.1/>1.27.1</a></li><li><a href=/docs/1.27.0/>1.27.0</a></li><li><a href=/docs/1.26.2/>1.26.2</a></li><li><a href=/docs/1.26.1/>1.26.1</a></li><li><a href=/docs/1.26.0/>1.26.0</a></li><li><a href=/docs/1.25.0/>1.25.0</a></li><li><a href=/docs/1.24.1/>1.24.1</a></li><li><a href=/docs/1.24.0/>1.24.0</a></li><li><a href=/docs/1.23.0/>1.23.0</a></li><li><a href=/docs/1.22.1/>1.22.1</a></li><li><a href=/docs/1.22.0/>1.22.0</a></li><li><a href=/docs/1.21.0/>1.21.0</a></li><li><a href=/docs/1.20.0/>1.20.0</a></li><li><a href=/docs/1.19.0/>1.19.0</a></li><li><a href=/docs/1.18.0/>1.18.0</a></li><li><a href=/docs/1.17.0/>1.17.0</a></li><li><a href=/docs/1.16.0/>1.16.0</a></li><li><a href=/docs/1.15.1/>1.15.1</a></li><li><a href=/docs/1.15.0/ class=active>1.15.0</a></li><li><a href=/docs/1.14.0/>1.14.0</a></li><li><a href=/docs/1.13.0/>1.13.0</a></li><li><a href=/docs/1.12.1/>1.12.1</a></li><li><a href=/docs/1.12.0/>1.12.0</a></li><li><a href=/docs/1.11.0/>1.11.0</a></li><li><a href=/docs/1.10.0/>1.10.0</a></li><li><a href=/docs/1.9.0/>1.9.0</a></li><li><a href=/docs/1.8.0/>1.8.0</a></li><li><a href=/docs/1.7.0/>1.7.0</a></li><li><a href=/docs/1.6.0/>1.6.0</a></li><li><a href=/docs/1.5.0/>1.5.0</a></li><li><a href=/docs/1.4.0/>1.4.0</a></li><li><a href=/docs/1.3.0/>1.3.0</a></li><li><a href=/docs/1.2.0/>1.2.0</a></li><li><a href=/docs/1.1.0/>1.1.0</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>1.15.0</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#language>Language</a></li><li><a href=#compiler>Compiler</a></li><li><a href=#compiler-performance>Compiler Performance</a></li><li><a href=#stabilized-apis>Stabilized APIs</a></li><li><a href=#libraries>Libraries</a></li><li><a href=#cargo>Cargo</a></li><li><a href=#tooling>Tooling</a></li><li><a href=#misc>Misc</a></li><li><a href=#compatibility-notes>Compatibility Notes</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=1150>1.15.0
<a class=anchor href=#1150>#</a></h1><blockquote class="book-hint info"><ul><li>Released on: <em>2 February, 2017</em></li><li>Branched from master on: <em>16 December, 2016</em></li></ul></blockquote><h2 id=language>Language
<a class=anchor href=#language>#</a></h2><ul><li>Basic procedural macros allowing custom <code>#[derive]</code>, aka &ldquo;macros 1.1&rdquo;, are
stable. This allows popular code-generating crates like Serde and Diesel to
work ergonomically. <a href=https://github.com/rust-lang/rfcs/blob/master/text/1681-macros-1.1.md>RFC 1681</a>.</li><li><a href=https://github.com/rust-lang/rust/pull/36868>Tuple structs may be empty. Unary and empty tuple structs may be instantiated
with curly braces</a>. Part of <a href=https://github.com/rust-lang/rfcs/blob/master/text/1506-adt-kinds.md>RFC 1506</a>.</li><li><a href=https://github.com/rust-lang/rust/pull/37127>A number of minor changes to name resolution have been activated</a>.
They add up to more consistent semantics, allowing for future evolution of
Rust macros. Specified in <a href=https://github.com/rust-lang/rfcs/blob/master/text/1560-name-resolution.md>RFC 1560</a>, see its section on <a href=https://github.com/rust-lang/rfcs/blob/master/text/1560-name-resolution.md#changes-to-name-resolution-rules>&ldquo;changes&rdquo;</a> for
details of what is different. The breaking changes here have been transitioned
through the <a href=https://github.com/rust-lang/rust/pull/38271><code>legacy_imports</code></a> lint since 1.14, with no known regressions.</li><li><a href=https://github.com/rust-lang/rust/pull/38279>In <code>macro_rules</code>, <code>path</code> fragments can now be parsed as type parameter
bounds</a></li><li><a href=https://github.com/rust-lang/rust/pull/37791><code>?Sized</code> can be used in <code>where</code> clauses</a></li><li><a href=https://github.com/rust-lang/rust/pull/37789>There is now a limit on the size of monomorphized types and it can be
modified with the <code>#![type_size_limit]</code> crate attribute, similarly to
the <code>#![recursion_limit]</code> attribute</a></li></ul><h2 id=compiler>Compiler
<a class=anchor href=#compiler>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/37973>On Windows, the compiler will apply dllimport attributes when linking to
extern functions</a>. Additional attributes and flags can control which
library kind is linked and its name. <a href=https://github.com/rust-lang/rfcs/blob/master/text/1717-dllimport.md>RFC 1717</a>.</li><li><a href=https://github.com/rust-lang/rust/pull/38117>Rust-ABI symbols are no longer exported from cdylibs</a></li><li><a href=https://github.com/rust-lang/rust/pull/38107>The <code>--test</code> flag works with procedural macro crates</a></li><li><a href=https://github.com/rust-lang/rust/pull/37814>Fix <code>extern "aapcs" fn</code> ABI</a></li><li><a href=https://github.com/rust-lang/rust/pull/37636>The <code>-C no-stack-check</code> flag is deprecated</a>. It does nothing.</li><li><a href=https://github.com/rust-lang/rust/pull/37613>The <code>format!</code> expander recognizes incorrect <code>printf</code> and shell-style
formatting directives and suggests the correct format</a>.</li><li><a href=https://github.com/rust-lang/rust/pull/37456>Only report one error for all unused imports in an import list</a></li></ul><h2 id=compiler-performance>Compiler Performance
<a class=anchor href=#compiler-performance>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/37705>Avoid unnecessary <code>mk_ty</code> calls in <code>Ty::super_fold_with</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37979>Avoid more unnecessary <code>mk_ty</code> calls in <code>Ty::super_fold_with</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37848>Don&rsquo;t clone in <code>UnificationTable::probe</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37764>Remove <code>scope_auxiliary</code> to cut RSS by 10%</a></li><li><a href=https://github.com/rust-lang/rust/pull/37760>Use small vectors in type walker</a></li><li><a href=https://github.com/rust-lang/rust/pull/37701>Macro expansion performance was improved</a></li><li><a href=https://github.com/rust-lang/rust/pull/37642>Change <code>HirVec&lt;P&lt;T>></code> to <code>HirVec&lt;T></code> in <code>hir::Expr</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37229>Replace FNV with a faster hash function</a></li></ul><h2 id=stabilized-apis>Stabilized APIs
<a class=anchor href=#stabilized-apis>#</a></h2><ul><li><a href=https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.min_by><code>std::iter::Iterator::min_by</code></a></li><li><a href=https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.max_by><code>std::iter::Iterator::max_by</code></a></li><li><a href=https://doc.rust-lang.org/std/os/unix/fs/trait.FileExt.html><code>std::os::*::fs::FileExt</code></a></li><li><a href=https://doc.rust-lang.org/std/sync/atomic/struct.AtomicU8.html#method.get_mut><code>std::sync::atomic::Atomic*::get_mut</code></a></li><li><a href=https://doc.rust-lang.org/std/sync/atomic/struct.AtomicU8.html#method.into_inner><code>std::sync::atomic::Atomic*::into_inner</code></a></li><li><a href=https://doc.rust-lang.org/std/vec/struct.IntoIter.html#method.as_slice><code>std::vec::IntoIter::as_slice</code></a></li><li><a href=https://doc.rust-lang.org/std/vec/struct.IntoIter.html#method.as_mut_slice><code>std::vec::IntoIter::as_mut_slice</code></a></li><li><a href=https://doc.rust-lang.org/std/sync/mpsc/struct.Receiver.html#method.try_iter><code>std::sync::mpsc::Receiver::try_iter</code></a></li><li><a href=https://doc.rust-lang.org/std/os/unix/process/trait.CommandExt.html#tymethod.before_exec><code>std::os::unix::process::CommandExt::before_exec</code></a></li><li><a href=https://doc.rust-lang.org/std/rc/struct.Rc.html#method.strong_count><code>std::rc::Rc::strong_count</code></a></li><li><a href=https://doc.rust-lang.org/std/rc/struct.Rc.html#method.weak_count><code>std::rc::Rc::weak_count</code></a></li><li><a href=https://doc.rust-lang.org/std/sync/struct.Arc.html#method.strong_count><code>std::sync::Arc::strong_count</code></a></li><li><a href=https://doc.rust-lang.org/std/sync/struct.Arc.html#method.weak_count><code>std::sync::Arc::weak_count</code></a></li><li><a href=https://doc.rust-lang.org/std/primitive.char.html#method.encode_utf8><code>std::char::encode_utf8</code></a></li><li><a href=https://doc.rust-lang.org/std/primitive.char.html#method.encode_utf16><code>std::char::encode_utf16</code></a></li><li><a href=https://doc.rust-lang.org/std/cell/struct.Ref.html#method.clone><code>std::cell::Ref::clone</code></a></li><li><a href=https://doc.rust-lang.org/std/io/struct.Take.html#method.into_inner><code>std::io::Take::into_inner</code></a></li></ul><h2 id=libraries>Libraries
<a class=anchor href=#libraries>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/38192>The standard sorting algorithm has been rewritten for dramatic performance
improvements</a>. It is a hybrid merge sort, drawing influences from
Timsort. Previously it was a naive merge sort.</li><li><a href=https://github.com/rust-lang/rust/pull/38134><code>Iterator::nth</code> no longer has a <code>Sized</code> bound</a></li><li><a href=https://github.com/rust-lang/rust/pull/38182><code>Extend&lt;&amp;T></code> is specialized for <code>Vec</code> where <code>T: Copy</code></a> to improve
performance.</li><li><a href=https://github.com/rust-lang/rust/pull/37888><code>chars().count()</code> is much faster</a> and so are <a href=https://github.com/rust-lang/rust/pull/37882><code>chars().last()</code>
and <code>char_indices().last()</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/38146>Fix ARM Objective-C ABI in <code>std::env::args</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37855>Chinese characters display correctly in <code>fmt::Debug</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37699>Derive <code>Default</code> for <code>Duration</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/37677>Support creation of anonymous pipes on WinXP/2k</a></li><li><a href=https://github.com/rust-lang/rust/pull/37527><code>mpsc::RecvTimeoutError</code> implements <code>Error</code></a></li><li><a href=https://github.com/rust-lang/rust/pull/38835>Don&rsquo;t pass overlapped handles to processes</a></li></ul><h2 id=cargo>Cargo
<a class=anchor href=#cargo>#</a></h2><ul><li><a href=https://github.com/rust-lang/cargo/issues/3368>In this release, Cargo build scripts no longer have access to the <code>OUT_DIR</code>
environment variable at build time via <code>env!("OUT_DIR")</code></a>. They
should instead check the variable at runtime with <code>std::env</code>. That the value
was set at build time was a bug, and incorrect when cross-compiling. This
change is known to cause breakage.</li><li><a href=https://github.com/rust-lang/cargo/pull/3221>Add <code>--all</code> flag to <code>cargo test</code></a></li><li><a href=https://github.com/rust-lang/cargo/pull/3363>Compile statically against the MSVC CRT</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3102>Mix feature flags into fingerprint/metadata shorthash</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3311>Link OpenSSL statically on OSX</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3310>Apply new fingerprinting to build dir outputs</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3336>Test for bad path overrides with summaries</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3338>Require <code>cargo install --vers</code> to take a semver version</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3348>Fix retrying crate downloads for network errors</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3356>Implement string lookup for <code>build.rustflags</code> config key</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3319>Emit more info on &ndash;message-format=json</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3361>Assume <code>build.rs</code> in the same directory as <code>Cargo.toml</code> is a build script</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3409>Don&rsquo;t ignore errors in workspace manifest</a></li><li><a href=https://github.com/rust-lang/cargo/pull/3410>Fix <code>--message-format JSON</code> when rustc emits non-JSON warnings</a></li></ul><h2 id=tooling>Tooling
<a class=anchor href=#tooling>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/38185>Test runners (binaries built with <code>--test</code>) now support a <code>--list</code> argument
that lists the tests it contains</a></li><li><a href=https://github.com/rust-lang/rust/pull/38181>Test runners now support a <code>--exact</code> argument that makes the test filter
match exactly, instead of matching only a substring of the test name</a></li><li><a href=https://github.com/rust-lang/rust/pull/37763>rustdoc supports a <code>--playground-url</code> flag</a></li><li><a href=https://github.com/rust-lang/rust/pull/37749>rustdoc provides more details about <code>#[should_panic]</code> errors</a></li></ul><h2 id=misc>Misc
<a class=anchor href=#misc>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/37817>The Rust build system is now written in Rust</a>. The Makefiles may
continue to be used in this release by passing <code>--disable-rustbuild</code> to the
configure script, but they will be deleted soon. Note that the new build
system uses a different on-disk layout that will likely affect any scripts
building Rust.</li><li><a href=https://github.com/rust-lang/rust/pull/38086>Rust supports i686-unknown-openbsd</a>. Tier 3 support. No testing or
releases.</li><li><a href=https://github.com/rust-lang/rust/pull/37627>Rust supports the MSP430</a>. Tier 3 support. No testing or releases.</li><li><a href=https://github.com/rust-lang/rust/pull/37615>Rust supports the ARMv5TE architecture</a>. Tier 3 support. No testing or
releases.</li></ul><h2 id=compatibility-notes>Compatibility Notes
<a class=anchor href=#compatibility-notes>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/37127>A number of minor changes to name resolution have been activated</a>.
They add up to more consistent semantics, allowing for future evolution of
Rust macros. Specified in <a href=https://github.com/rust-lang/rfcs/blob/master/text/1560-name-resolution.md>RFC 1560</a>, see its section on <a href=https://github.com/rust-lang/rfcs/blob/master/text/1560-name-resolution.md#changes-to-name-resolution-rules>&ldquo;changes&rdquo;</a> for
details of what is different. The breaking changes here have been transitioned
through the <a href=https://github.com/rust-lang/rust/pull/38271><code>legacy_imports</code></a> lint since 1.14, with no known regressions.</li><li><a href=https://github.com/rust-lang/cargo/issues/3368>In this release, Cargo build scripts no longer have access to the <code>OUT_DIR</code>
environment variable at build time via <code>env!("OUT_DIR")</code></a>. They
should instead check the variable at runtime with <code>std::env</code>. That the value
was set at build time was a bug, and incorrect when cross-compiling. This
change is known to cause breakage.</li><li><a href=https://github.com/rust-lang/rust/issues/33685>Higher-ranked lifetimes are no longer allowed to appear <em>only</em> in associated
types</a>. The <a href=https://github.com/rust-lang/rust/issues/33685><code>hr_lifetime_in_assoc_type</code> lint</a> has been a warning since
1.10 and is now an error by default. It will become a hard error in the near
future.</li><li><a href=https://github.com/rust-lang/rust/pull/37602>The semantics relating modules to file system directories are changing in
minor ways</a>. This is captured in the new <code>legacy_directory_ownership</code>
lint, which is a warning in this release, and will become a hard error in the
future.</li><li><a href=https://github.com/rust-lang/rust/pull/38117>Rust-ABI symbols are no longer exported from cdylibs</a></li><li><a href=https://github.com/rust-lang/rust/pull/37834>Once <code>Peekable</code> peeks a <code>None</code> it will return that <code>None</code> without re-querying
the underlying iterator</a></li></ul></article><footer class=book-footer><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#language>Language</a></li><li><a href=#compiler>Compiler</a></li><li><a href=#compiler-performance>Compiler Performance</a></li><li><a href=#stabilized-apis>Stabilized APIs</a></li><li><a href=#libraries>Libraries</a></li><li><a href=#cargo>Cargo</a></li><li><a href=#tooling>Tooling</a></li><li><a href=#misc>Misc</a></li><li><a href=#compatibility-notes>Compatibility Notes</a></li></ul></nav></div></aside></main></body></html>