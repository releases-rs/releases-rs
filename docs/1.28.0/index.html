<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="1.28.0 # Released on: 2 August, 2018 Branched from master on: 15 June, 2018 Language # The #[repr(transparent)] attribute is now stable. This attribute allows a Rust newtype wrapper (struct NewType<T>(T);) to be represented as the inner type across Foreign Function Interface (FFI) boundaries. The keywords pure, sizeof, alignof, and offsetof have been unreserved and can now be used as identifiers. The GlobalAlloc trait and #[global_allocator] attribute are now stable."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="1.28.0 # Released on: 2 August, 2018 Branched from master on: 15 June, 2018 Language # The #[repr(transparent)] attribute is now stable. This attribute allows a Rust newtype wrapper (struct NewType<T>(T);) to be represented as the inner type across Foreign Function Interface (FFI) boundaries. The keywords pure, sizeof, alignof, and offsetof have been unreserved and can now be used as identifiers. The GlobalAlloc trait and #[global_allocator] attribute are now stable."><meta property="og:type" content="article"><meta property="og:url" content="https://releases.rs/docs/1.28.0/"><meta property="article:section" content="docs"><title>1.28.0 | Rust Changelogs</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f8de3645fe00591b41524aee174e19edd98a22255a2930a0cdc82a94835ba387.css integrity="sha256-+N42Rf4AWRtBUkruF04Z7dmKIiVaKTCgzcgqlINbo4c=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.4b3f6ccbacbae36b332f242dd5e49b9dad9741972a665049ee5a4415cdd0f7c9.js integrity="sha256-Sz9sy6y642szLyQt1eSbna2XQZcqZlBJ7lpEFc3Q98k=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WXS0HSEV58"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WXS0HSEV58",{anonymize_ip:!1})}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=https://www.rust-lang.org/static/images/rust-logo-blk.svg alt=Logo><span>Rust Changelogs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/1.77.0/>1.77.0</a></li><li><a href=/docs/1.76.0/>1.76.0</a></li><li><a href=/docs/1.75.0/>1.75.0</a></li><li><a href=/docs/1.74.1/>1.74.1</a></li><li><a href=/docs/1.74.0/>1.74.0</a></li><li><a href=/docs/1.73.0/>1.73.0</a></li><li><a href=/docs/1.72.1/>1.72.1</a></li><li><a href=/docs/1.72.0/>1.72.0</a></li><li><a href=/docs/1.71.1/>1.71.1</a></li><li><a href=/docs/1.71.0/>1.71.0</a></li><li><a href=/docs/1.70.0/>1.70.0</a></li><li><a href=/docs/1.69.0/>1.69.0</a></li><li><a href=/docs/1.68.2/>1.68.2</a></li><li><a href=/docs/1.68.1/>1.68.1</a></li><li><a href=/docs/1.68.0/>1.68.0</a></li><li><a href=/docs/1.67.1/>1.67.1</a></li><li><a href=/docs/1.67.0/>1.67.0</a></li><li><a href=/docs/1.66.1/>1.66.1</a></li><li><a href=/docs/1.66.0/>1.66.0</a></li><li><a href=/docs/1.65.0/>1.65.0</a></li><li><a href=/docs/1.64.0/>1.64.0</a></li><li><a href=/docs/1.63.0/>1.63.0</a></li><li><a href=/docs/1.62.1/>1.62.1</a></li><li><a href=/docs/1.62.0/>1.62.0</a></li><li><a href=/docs/1.61.0/>1.61.0</a></li><li><a href=/docs/1.60.0/>1.60.0</a></li><li><a href=/docs/1.59.0/>1.59.0</a></li><li><a href=/docs/1.58.1/>1.58.1</a></li><li><a href=/docs/1.58.0/>1.58.0</a></li><li><a href=/docs/1.57.0/>1.57.0</a></li><li><a href=/docs/1.56.1/>1.56.1</a></li><li><a href=/docs/1.56.0/>1.56.0</a></li><li><a href=/docs/1.55.0/>1.55.0</a></li><li><a href=/docs/1.54.0/>1.54.0</a></li><li><a href=/docs/1.53.0/>1.53.0</a></li><li><a href=/docs/1.52.1/>1.52.1</a></li><li><a href=/docs/1.52.0/>1.52.0</a></li><li><a href=/docs/1.51.0/>1.51.0</a></li><li><a href=/docs/1.50.0/>1.50.0</a></li><li><a href=/docs/1.49.0/>1.49.0</a></li><li><a href=/docs/1.48.0/>1.48.0</a></li><li><a href=/docs/1.47.0/>1.47.0</a></li><li><a href=/docs/1.46.0/>1.46.0</a></li><li><a href=/docs/1.45.2/>1.45.2</a></li><li><a href=/docs/1.45.1/>1.45.1</a></li><li><a href=/docs/1.45.0/>1.45.0</a></li><li><a href=/docs/1.44.1/>1.44.1</a></li><li><a href=/docs/1.44.0/>1.44.0</a></li><li><a href=/docs/1.43.1/>1.43.1</a></li><li><a href=/docs/1.43.0/>1.43.0</a></li><li><a href=/docs/1.42.0/>1.42.0</a></li><li><a href=/docs/1.41.1/>1.41.1</a></li><li><a href=/docs/1.41.0/>1.41.0</a></li><li><a href=/docs/1.40.0/>1.40.0</a></li><li><a href=/docs/1.39.0/>1.39.0</a></li><li><a href=/docs/1.38.0/>1.38.0</a></li><li><a href=/docs/1.37.0/>1.37.0</a></li><li><a href=/docs/1.36.0/>1.36.0</a></li><li><a href=/docs/1.35.0/>1.35.0</a></li><li><a href=/docs/1.34.2/>1.34.2</a></li><li><a href=/docs/1.34.1/>1.34.1</a></li><li><a href=/docs/1.34.0/>1.34.0</a></li><li><a href=/docs/1.33.0/>1.33.0</a></li><li><a href=/docs/1.32.0/>1.32.0</a></li><li><a href=/docs/1.31.1/>1.31.1</a></li><li><a href=/docs/1.31.0/>1.31.0</a></li><li><a href=/docs/1.30.1/>1.30.1</a></li><li><a href=/docs/1.30.0/>1.30.0</a></li><li><a href=/docs/1.29.2/>1.29.2</a></li><li><a href=/docs/1.29.1/>1.29.1</a></li><li><a href=/docs/1.29.0/>1.29.0</a></li><li><a href=/docs/1.28.0/ class=active>1.28.0</a></li><li><a href=/docs/1.27.2/>1.27.2</a></li><li><a href=/docs/1.27.1/>1.27.1</a></li><li><a href=/docs/1.27.0/>1.27.0</a></li><li><a href=/docs/1.26.2/>1.26.2</a></li><li><a href=/docs/1.26.1/>1.26.1</a></li><li><a href=/docs/1.26.0/>1.26.0</a></li><li><a href=/docs/1.25.0/>1.25.0</a></li><li><a href=/docs/1.24.1/>1.24.1</a></li><li><a href=/docs/1.24.0/>1.24.0</a></li><li><a href=/docs/1.23.0/>1.23.0</a></li><li><a href=/docs/1.22.1/>1.22.1</a></li><li><a href=/docs/1.22.0/>1.22.0</a></li><li><a href=/docs/1.21.0/>1.21.0</a></li><li><a href=/docs/1.20.0/>1.20.0</a></li><li><a href=/docs/1.19.0/>1.19.0</a></li><li><a href=/docs/1.18.0/>1.18.0</a></li><li><a href=/docs/1.17.0/>1.17.0</a></li><li><a href=/docs/1.16.0/>1.16.0</a></li><li><a href=/docs/1.15.1/>1.15.1</a></li><li><a href=/docs/1.15.0/>1.15.0</a></li><li><a href=/docs/1.14.0/>1.14.0</a></li><li><a href=/docs/1.13.0/>1.13.0</a></li><li><a href=/docs/1.12.1/>1.12.1</a></li><li><a href=/docs/1.12.0/>1.12.0</a></li><li><a href=/docs/1.11.0/>1.11.0</a></li><li><a href=/docs/1.10.0/>1.10.0</a></li><li><a href=/docs/1.9.0/>1.9.0</a></li><li><a href=/docs/1.8.0/>1.8.0</a></li><li><a href=/docs/1.7.0/>1.7.0</a></li><li><a href=/docs/1.6.0/>1.6.0</a></li><li><a href=/docs/1.5.0/>1.5.0</a></li><li><a href=/docs/1.4.0/>1.4.0</a></li><li><a href=/docs/1.3.0/>1.3.0</a></li><li><a href=/docs/1.2.0/>1.2.0</a></li><li><a href=/docs/1.1.0/>1.1.0</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>1.28.0</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#language>Language</a></li><li><a href=#compiler>Compiler</a></li><li><a href=#libraries>Libraries</a></li><li><a href=#stabilized-apis>Stabilized APIs</a></li><li><a href=#cargo>Cargo</a></li><li><a href=#misc>Misc</a></li><li><a href=#compatibility-notes>Compatibility Notes</a></li></ul></nav></aside></header><article class=markdown><h1 id=1280>1.28.0
<a class=anchor href=#1280>#</a></h1><blockquote class="book-hint info"><ul><li>Released on: <em>2 August, 2018</em></li><li>Branched from master on: <em>15 June, 2018</em></li></ul></blockquote><h2 id=language>Language
<a class=anchor href=#language>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/51562/>The <code>#[repr(transparent)]</code> attribute is now stable.</a> This attribute
allows a Rust newtype wrapper (<code>struct NewType&lt;T>(T);</code>) to be represented as
the inner type across Foreign Function Interface (FFI) boundaries.</li><li><a href=https://github.com/rust-lang/rust/pull/51196/>The keywords <code>pure</code>, <code>sizeof</code>, <code>alignof</code>, and <code>offsetof</code> have been unreserved
and can now be used as identifiers.</a></li><li><a href=https://github.com/rust-lang/rust/pull/51241/>The <code>GlobalAlloc</code> trait and <code>#[global_allocator]</code> attribute are now
stable.</a> This will allow users to specify a global allocator for
their program.</li><li><a href=https://github.com/rust-lang/rust/pull/51298/>Unit test functions marked with the <code>#[test]</code> attribute can now return
<code>Result&lt;(), E: Debug></code> in addition to <code>()</code>.</a></li><li><a href=https://github.com/rust-lang/rust/pull/50385/>The <code>lifetime</code> specifier for <code>macro_rules!</code> is now stable.</a> This
allows macros to easily target lifetimes.</li></ul><h2 id=compiler>Compiler
<a class=anchor href=#compiler>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/50265/>The <code>s</code> and <code>z</code> optimisation levels are now stable.</a> These optimisations
prioritise making smaller binary sizes. <code>z</code> is the same as <code>s</code> with the
exception that it does not vectorise loops, which typically results in an even
smaller binary.</li><li><a href=https://github.com/rust-lang/rust/pull/49546/>The short error format is now stable.</a> Specified with
<code>--error-format=short</code> this option will provide a more compressed output of
rust error messages.</li><li><a href=https://github.com/rust-lang/rust/pull/50143/>Added a lint warning when you have duplicated <code>macro_export</code>s.</a></li><li><a href=https://github.com/rust-lang/rust/pull/50855/>Reduced the number of allocations in the macro parser.</a> This can
improve compile times of macro heavy crates on average by 5%.</li></ul><h2 id=libraries>Libraries
<a class=anchor href=#libraries>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/51306/>Implemented <code>Default</code> for <code>&amp;mut str</code>.</a></li><li><a href=https://github.com/rust-lang/rust/pull/50554/>Implemented <code>From&lt;bool></code> for all integer and unsigned number types.</a></li><li><a href=https://github.com/rust-lang/rust/pull/50234/>Implemented <code>Extend</code> for <code>()</code>.</a></li><li><a href=https://github.com/rust-lang/rust/pull/50364/>The <code>Debug</code> implementation of <code>time::Duration</code> should now be more easily
human readable.</a> Previously a <code>Duration</code> of one second would printed as
<code>Duration { secs: 1, nanos: 0 }</code> and will now be printed as <code>1s</code>.</li><li><a href=https://github.com/rust-lang/rust/pull/50170/>Implemented <code>From&lt;&amp;String></code> for <code>Cow&lt;str></code>, <code>From&lt;&amp;Vec&lt;T>></code> for <code>Cow&lt;[T]></code>,
<code>From&lt;Cow&lt;CStr>></code> for <code>CString</code>, <code>From&lt;CString>, From&lt;CStr>, From&lt;&amp;CString></code>
for <code>Cow&lt;CStr></code>, <code>From&lt;OsString>, From&lt;OsStr>, From&lt;&amp;OsString></code> for
<code>Cow&lt;OsStr></code>, <code>From&lt;&amp;PathBuf></code> for <code>Cow&lt;Path></code>, and <code>From&lt;Cow&lt;Path>></code>
for <code>PathBuf</code>.</a></li><li><a href=https://github.com/rust-lang/rust/pull/50465/>Implemented <code>Shl</code> and <code>Shr</code> for <code>Wrapping&lt;u128></code>
and <code>Wrapping&lt;i128></code>.</a></li><li><a href=https://github.com/rust-lang/rust/pull/51050/><code>DirEntry::metadata</code> now uses <code>fstatat</code> instead of <code>lstat</code> when
possible.</a> This can provide up to a 40% speed increase.</li><li><a href=https://github.com/rust-lang/rust/pull/50610/>Improved error messages when using <code>format!</code>.</a></li></ul><h2 id=stabilized-apis>Stabilized APIs
<a class=anchor href=#stabilized-apis>#</a></h2><ul><li><a href=https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.step_by><code>Iterator::step_by</code></a></li><li><a href=https://doc.rust-lang.org/std/path/struct.Path.html#method.ancestors><code>Path::ancestors</code></a></li><li><a href=https://doc.rust-lang.org/std/time/struct.SystemTime.html#associatedconstant.UNIX_EPOCH><code>SystemTime::UNIX_EPOCH</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/trait.GlobalAlloc.html><code>alloc::GlobalAlloc</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/struct.Layout.html><code>alloc::Layout</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/struct.LayoutErr.html><code>alloc::LayoutErr</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/struct.System.html><code>alloc::System</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/fn.alloc.html><code>alloc::alloc</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/fn.alloc_zeroed.html><code>alloc::alloc_zeroed</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/fn.dealloc.html><code>alloc::dealloc</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/fn.realloc.html><code>alloc::realloc</code></a></li><li><a href=https://doc.rust-lang.org/std/alloc/fn.handle_alloc_error.html><code>alloc::handle_alloc_error</code></a></li><li><a href=https://doc.rust-lang.org/std/collections/btree_map/enum.Entry.html#method.or_default><code>btree_map::Entry::or_default</code></a></li><li><a href=https://doc.rust-lang.org/std/fmt/enum.Alignment.html><code>fmt::Alignment</code></a></li><li><a href=https://doc.rust-lang.org/std/collections/hash_map/enum.Entry.html#method.or_default><code>hash_map::Entry::or_default</code></a></li><li><a href=https://doc.rust-lang.org/std/iter/fn.repeat_with.html><code>iter::repeat_with</code></a></li><li><a href=https://doc.rust-lang.org/std/num/struct.NonZeroUsize.html><code>num::NonZeroUsize</code></a></li><li><a href=https://doc.rust-lang.org/std/num/struct.NonZeroU128.html><code>num::NonZeroU128</code></a></li><li><a href=https://doc.rust-lang.org/std/num/struct.NonZeroU16.html><code>num::NonZeroU16</code></a></li><li><a href=https://doc.rust-lang.org/std/num/struct.NonZeroU32.html><code>num::NonZeroU32</code></a></li><li><a href=https://doc.rust-lang.org/std/num/struct.NonZeroU64.html><code>num::NonZeroU64</code></a></li><li><a href=https://doc.rust-lang.org/std/num/struct.NonZeroU8.html><code>num::NonZeroU8</code></a></li><li><a href=https://doc.rust-lang.org/std/ops/trait.RangeBounds.html><code>ops::RangeBounds</code></a></li><li><a href=https://doc.rust-lang.org/std/slice/trait.SliceIndex.html><code>slice::SliceIndex</code></a></li><li><a href=https://doc.rust-lang.org/std/slice/fn.from_mut.html><code>slice::from_mut</code></a></li><li><a href=https://doc.rust-lang.org/std/slice/fn.from_ref.html><code>slice::from_ref</code></a></li><li><a href=https://doc.rust-lang.org/std/any/trait.Any.html#method.downcast_mut-2><code>{Any + Send + Sync}::downcast_mut</code></a></li><li><a href=https://doc.rust-lang.org/std/any/trait.Any.html#method.downcast_ref-2><code>{Any + Send + Sync}::downcast_ref</code></a></li><li><a href=https://doc.rust-lang.org/std/any/trait.Any.html#method.is-2><code>{Any + Send + Sync}::is</code></a></li></ul><h2 id=cargo>Cargo
<a class=anchor href=#cargo>#</a></h2><ul><li><a href=https://github.com/rust-lang/cargo/pull/5584/>Cargo will now no longer allow you to publish crates with build scripts that
modify the <code>src</code> directory.</a> The <code>src</code> directory in a crate should be
considered to be immutable.</li></ul><h2 id=misc>Misc
<a class=anchor href=#misc>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/50486/>The <code>suggestion_applicability</code> field in <code>rustc</code>&rsquo;s json output is now
stable.</a> This will allow dev tools to check whether a code suggestion
would apply to them.</li></ul><h2 id=compatibility-notes>Compatibility Notes
<a class=anchor href=#compatibility-notes>#</a></h2><ul><li><a href=https://github.com/rust-lang/rust/pull/51276/>Rust will consider trait objects with duplicated constraints to be the same
type as without the duplicated constraint.</a> For example the below code will
now fail to compile.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>trait</span> Trait {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Trait <span style=color:#f92672>+</span> Send {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>test</span>(<span style=color:#f92672>&amp;</span>self) { println!(<span style=color:#e6db74>&#34;one&#34;</span>); } <span style=color:#75715e>//~ ERROR duplicate definitions with name `test`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Trait <span style=color:#f92672>+</span> Send <span style=color:#f92672>+</span> Send {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>test</span>(<span style=color:#f92672>&amp;</span>self) { println!(<span style=color:#e6db74>&#34;two&#34;</span>); }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul></article><footer class=book-footer><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#language>Language</a></li><li><a href=#compiler>Compiler</a></li><li><a href=#libraries>Libraries</a></li><li><a href=#stabilized-apis>Stabilized APIs</a></li><li><a href=#cargo>Cargo</a></li><li><a href=#misc>Misc</a></li><li><a href=#compatibility-notes>Compatibility Notes</a></li></ul></nav></div></aside></main></body></html>